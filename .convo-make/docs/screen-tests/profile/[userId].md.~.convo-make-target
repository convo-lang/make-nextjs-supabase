> define
__makeRoot="../../../.."
__makeFile="make.convo"
__makeOut="docs/screen-tests/profile/[userId].md"
__model="gpt-5"

> system
You are generating content that will be directly written to "docs/screen-tests/profile/[userId].md".
DO NOT include a preamble or postamble.

Always respond with the full content for "docs/screen-tests/profile/[userId].md", even if you are making an
small or incremental update.

> appendUser
<app-description>
## Task Bee

A minimal, light-hearted task manager for companies. Task Bee helps teams capture, organize, complete, and archive tasks, with rich markdown details and simple sharing.

### Overview
Task Bee enables signed-in users to manage their organization’s tasks in a multi-tenant setup. Tasks can include detailed markdown content with edit and preview modes, can be marked complete, archived, and exported as a markdown file. Account admins can manage account details and user roles, while all signed-in users gain access to dashboards and task detail pages.

## Features

- Task management
  - Add tasks
  - Remove tasks
  - Mark tasks as completed
  - Archive tasks
  - Download tasks as a markdown file
  - Store detailed task information in markdown format
    - Includes both edit and preview modes
  - Share a link to a task detail page

- Account and access
  - Multi-tenant accounts with role-based visibility and permissions
  - Invite users to an account via an invite link
  - View account info, logo, and ID
  - Admins can edit account info and manage member roles
  - View user profiles (self and public view)
  - Switch between accounts

## User Roles

- guest
  - A user not signed in
- default
  - Default role for a signed-in user belonging to an account
- manager
  - An account manager with elevated capabilities
- admin
  - A super admin that can manage any account and its users

## Screens

### Landing page
- Route: /
- Seen by roles: all
- Description: A marketing page for Task Bee with a large, eye-catching full-screen hero carousel highlighting the app’s top value propositions.

### Register
- Route: /register
- Seen by roles: all
- Description: Register a new user and create an organizational account. If already signed in, a message indicates the user is already registered.
- Inputs:
  - name
  - email
  - Organization name
  - password

### Sign-in
- Route: /sign-in
- Seen by roles: all
- Description: Sign in as an existing user. If already signed in, a message indicates the user is already signed in.
- Inputs:
  - email
  - password

### Dashboard
- Route: /dashboard
- Seen by roles: all signed-in users
- Description: The central place for managing tasks for the current company/account.
- Capabilities:
  - Add, remove tasks
  - Mark tasks as completed
  - Archive tasks
  - Download tasks as markdown

### Task Detail
- Route: /task/[task-id]
- Seen by roles: all signed-in users
- Description: A dedicated page to manage and view a single task.
- Capabilities:
  - View and edit task details in markdown
    - Toggle between edit and preview modes
  - Mark as completed
  - Archive task
  - Download this task as markdown
  - Share a link to this task

### Account
- Route: /account
- Seen by roles: all signed-in users
- Description: Shows account information and membership.
- Details:
  - Displays:
    - name
    - logo
    - id (muted)
  - Admin-only:
    - Edit account info
    - Invite users via invite link:
      - https://${location.host}/accept-account-invite/${inviteCode}
  - Users section:
    - Grid of user cards (name + profile picture), linking to each user’s public profile
  - Link to create a new account

### Accept Account Invite
- Route: /accept-account-invite/[invite-code]
- Seen by roles: all
- Description: Accept or decline an invite to join an account. If not signed in, users are prompted to sign in first.

### Profile
- Route: /profile
- Seen by roles: all signed-in users
- Description: The private profile page for the current user.
- Capabilities:
  - View personal info
  - View all accounts the user belongs to, with option to switch accounts
  - Edit profile fields, except email address (not editable)

### Public Profile
- Route: /profile/[user-id]
- Seen by roles: all signed-in users
- Description: Public-facing profile page as seen by other users within the account context.
- Admin functionality:
  - Admins can see the user’s role
  - Admins can change the user’s role
  - Admins cannot change their own role

## Task Model and Behaviors

- A task contains:
  - Title and status (active, completed, archived)
  - Detailed description in markdown
  - Metadata related to its account
- Actions:
  - Edit details in markdown with a live preview mode
  - Mark complete for workflow visibility
  - Archive to keep the dashboard focused while retaining historical context
  - Export/download as a markdown file for offline sharing or documentation
  - Share link to the task detail page with teammates

## Styling

- Framework: Tailwind CSS
- Look and feel:
  - Minimalistic
  - Light-hearted
  - Good use of negative space
  - Gradient backgrounds
  - Rounded corners and surfaces
- Custom color palette:
  - CSS variables:
    - --light-blue: #a8d5e2ff
    - --orange-web: #f9a620ff (Brand color)
    - --mustard: #ffd449ff
    - --forest-green: #548c2fff (Secondary)
    - --pakistan-green: #104911ff
- Brand usage rules:
  - Use the brand color (#f9a620ff) sparingly
  - Reserve the brand color primarily for the most important CTAs or as a subtle thin border for highlights when not a main CTA

## Summary

Task Bee streamlines task tracking for companies with a clear, role-aware experience. Users can collaborate on tasks, enrich them with markdown detail, and maintain clean dashboards by completing and archiving items. Admins manage their accounts and memberships, while a thoughtful, minimal visual style ensures focus and clarity.
</app-description>

> appendUser
<all-screens>
[
    {
        "name": "Landing page",
        "route": "index",
        "description": "Marketing home with a full-screen hero carousel highlighting Task Bee’s top value propositions."
    },
    {
        "name": "Register",
        "route": "register",
        "description": "Register a new user and create an organization; shows a notice if already signed in."
    },
    {
        "name": "Sign-in",
        "route": "sign-in",
        "description": "Sign in to an existing account; shows a notice if already signed in."
    },
    {
        "name": "Dashboard",
        "route": "dashboard",
        "description": "Manage company tasks: add, remove, complete, archive, and download as markdown."
    },
    {
        "name": "Task Detail",
        "route": "task/[taskId]",
        "description": "View and edit a single task in markdown, toggle preview, complete, archive, and download."
    },
    {
        "name": "Account",
        "route": "account",
        "description": "View account info (name, logo, id), manage users, admins can edit info and generate invite links."
    },
    {
        "name": "Accept Account Invite",
        "route": "accept-account-invite/[inviteCode]",
        "description": "Accept or decline an account invite; prompts sign-in if the user is not authenticated."
    },
    {
        "name": "Profile",
        "route": "profile",
        "description": "Private user profile: view info, edit (except email), and switch between joined accounts."
    },
    {
        "name": "Public Profile",
        "route": "profile/[userId]",
        "description": "Public-facing profile within the account; admins can view/change the user’s role (not their own)."
    }
]
</all-screens>

> appendUser
<screen-description>
# Screen Description

Name: Public Profile
Route: /profile/[userId]

## Description
A public-facing profile for a user within the context of the currently selected account (tenant). All signed-in users can view this page. It presents the user’s display name, avatar, and optional hero image with a clean, minimal layout and generous negative space. Email is not shown to preserve privacy.

Admins see the user’s role for the current account and can change it, with clear guardrails:
- Admins cannot change their own role (the control is disabled with an explanatory hint).
- Role options reflect the app’s role model: guest, default, manager, admin.
- Changes apply only to this account’s membership for the user (multi-tenant aware).
- A confirm step helps prevent accidental changes.

The profile may include light contextual info, such as when the user joined the account and a small “recent activity” snippet (when available). If recent tasks are shown, each task title links to its Task Detail page.

The page is designed to be easily shareable inside the workspace; a Copy link action provides the canonical link to this public profile route.

## Actions
- View a teammate’s public-facing information (name, avatar, optional hero image).
- Copy the shareable link to this public profile.
- Optional: Open “recent tasks” created or last updated by this user (when shown).
- Admin only:
  - View the user’s current role for this account.
  - Change the user’s role among: guest, default, manager, admin.
  - Confirm a role change before it’s applied.
  - Cannot modify their own role (control disabled with a note).

## Links
- profile/[userId]: share or copy the public profile link for this user
- task/[taskId]: open a specific task from the user’s “recent activity” list (when shown)
</screen-description>

> appendUser
Generate a simple set of tests to test all the features of the screens. The tests should be 
    should be a smile bullet list of short sentences describing features to test.

    The test should be able to be completed by a human in 10 minutes or less. Do not include more
    than 25 bullet points.

> nop
//_END_MAKE_TARGET_INPUT_


@time 2025-10-27T06:48:25-04:00
@tokenUsage 2210 / 1446 / $0.00457
@model gpt-5-2025-08-07
> assistant
- Open /profile/[userId] while signed in and verify the display name, avatar, and optional hero image are visible; email is not shown.
- Verify the avatar shows a neutral placeholder when the user has no avatar.
- Verify the hero image loads responsively and falls back gracefully if missing.
- Click “Copy link” and confirm a success toast appears and the clipboard contains the canonical /profile/[userId] URL.
- Paste the copied link in a new tab while signed in and confirm the same profile loads.
- Paste the copied link in a new tab while signed out and confirm you are prompted to sign in.
- If “Recent activity” is present, verify each task title is a link to its Task Detail page and opens correctly.
- If no recent activity exists, verify the section is hidden or shows a non-blocking empty state.
- As a non-admin user, verify no role controls are visible (you cannot see or edit roles).
- As an admin viewing another user, verify the current role is shown with options: guest, default, manager, admin.
- As an admin viewing your own profile, verify the role control is disabled with an explanatory hint.
- As an admin, initiate a role change for another user and confirm a confirmation dialog appears.
- Click Cancel in the confirm dialog and verify the role remains unchanged.
- Confirm the role change and verify the role updates immediately in the UI.
- Refresh the page and verify the updated role persists.
- Switch to a different account and verify the user’s role in that account remains unchanged (multi-tenant isolation).
- Switch back to the original account and verify the updated role is still applied there.
- Verify long display names do not overflow or break the layout.
- Navigate through the page using only the keyboard and confirm all controls (including the confirm dialog) are accessible with visible focus.
- Trigger the confirm dialog and verify focus is trapped within the dialog until dismissed.
- Trigger “Copy link” via keyboard and confirm the success message is announced to screen readers (ARIA live region).
- Inspect the DOM to verify the user’s email is not present anywhere on the page.
- Verify brand usage is subtle (no overuse of the brand color) and the page maintains a minimal, spacious layout.
- Confirm the page loads quickly and interactions (copy, role change) complete without noticeable lag.



> user
